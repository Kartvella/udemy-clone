{% extends "core/base.html" %}

{% block title %}{{ course.title }} - Course Details{% endblock %}

{% block body %}
<div class="max-w-4xl mx-auto bg-white shadow-lg rounded-lg p-6">
    <!-- Course Header -->
    <div class="flex gap-6 mb-6">
        <div class="flex-none">
            <img src="{{ course.thumbnail.url }}" alt="{{ course.title }}" class="w-64 h-40 object-cover rounded-lg">
        </div>
        <div class="flex-1">
            <h1 class="text-3xl font-semibold text-gray-800 mb-2">{{ course.title }}</h1>
            <p class="text-gray-600 mb-4">{{ course.description }}</p>
            <p class="text-xl text-green-600 font-bold">Price: ${{ course.price }}</p>
            <p class="text-gray-500 mt-2">Instructor: <span class="font-semibold">{{ course.instructor.username }}</span></p>
        </div>
    </div>

    <div class="mb-6">
        <h2 class="text-2xl font-semibold text-gray-800 mb-4">Lessons</h2>
        <ul class="space-y-4">
            {% for lesson in course.lessons.all %}
                <li class="border-b py-2">
                    <a href="{% url 'courses:course_lesson' course.slug lesson.slug %}" class="text-blue-600 hover:text-blue-800">
                        {{ lesson.title }}
                    </a>
                </li>
            {% empty %}
                <li>No lessons available.</li>
            {% endfor %}
        </ul>
    </div>

    <div>
        <h2 class="text-2xl font-semibold text-gray-800 mb-4">Reviews</h2>
        <div class="space-y-4">
            {% for review in course.reviews.all %}
                <div class="border-b py-4">
                    <p class="font-semibold text-gray-700">{{ review.user.username }}:</p>
                    <p class="text-yellow-500">
                        {% for i in review.rating %}
                            &#9733;  <!-- Filled star -->
                        {% endfor %}
                        {% for i in review.rating %}
                            &#9734;  <!-- Empty star -->
                        {% endfor %}
                    </p>
                    <p class="mt-2">{{ review.review_text }}</p>
                </div>
            {% empty %}
                <p>No reviews yet. Be the first to review this course!</p>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
